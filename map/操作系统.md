# 操作系统

## 一、程序/进程/线程

- 程序：静态的代码 存储在磁盘中 指令+数据
- 进程：程序运行的基本单位，一个进程就是一个执行中的程序 
- 线程：操作系统调度的基本单位，一个进程可以包含多个线程 多个线程共享一个进程的内存和系统资源 
- 协程：是一种比线程更加轻量级的存在 正如一个携程可以拥有多个线程一样， 一个线程可以拥有多个协程。协程并没有增加线程的数量，只是在线程的基础上通过分时复用的方式运行多个协程，而且协程的切换在用户态完成，切换的代价比线程从用户态到内核态的代价小很多。

## 二、进程间通信

- 管道/匿名管道
- 有名管道
- 信号量
- 消息队列
- 信号
- 共享内存
- 套接字

## 三、进程间同步

- 信号量
- 互斥量
- 事件

## 四、进程调度算法

- 先到先服务
- 短作业优先
- 时间片轮转
- 多级反馈队列
- 优先级调度

## 五、内存管理

- 块式管理
- 页式管理
- 段式管理
- 段页式管理
- 虚拟内存：为每个进程提供一致的 连续的地址空间，把内存扩展到硬盘空间；

## 六、用户态与核心态

- 用户态：只能受限制的访问内存 运行所有的应用程序
- 核心态：运营操作系统程序 cpu可以访问内存的所有数据 包括外围设备

### 为什么需要区分

- 需要限制不同应用程序之间的访问能力
- 防止获取其他应用程序的内存数据

### 用户态怎么进内核态

- 系统调用
- 异常
- 缺页异常
- 外围设中断

## 七、其他

- CopyOnWrite
- 零拷贝

## 八、进程间通信方式

- 管道
- 信号
- 消息队列
- 共享队列
- 信号量
- 套接字

## 九、死锁

### 条件

- 互斥条件：进程对所分配到的资源不允许其他进程访问 若其他进程访问该资源 只能等待至占有该资源的进程释放该资源
- 占有且等待：进程获取一定资源后 多其他资源发出请求，阻塞过程中不会释放自己占有的资源
- 不可抢占：已获取的资源在未完成之前 不可被剥夺 只能自己释放
- 循环等待：形成环路，每个进程都在等待临近进程占用的资源

### 解决

- 破坏死锁的任意条件
- 乐观锁 破坏互斥
- 资源一次性分配 破坏请求和保持
- 超时机制
- 资源有序分配

